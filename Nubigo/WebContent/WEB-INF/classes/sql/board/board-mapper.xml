<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	<entry key="selectListCount">
	SELECT COUNT(*) AS COUNT FROM BOARD WHERE DELETE_STATUS='N'
	</entry>
    <entry key="listCountAll">
    SELECT COUNT(*) AS COUNT FROM BOARD WHERE DELETE_STATUS='N'AND (BOARD_TITLE || BOARD_CONTENT LIKE ?)
    </entry>
    <entry key="listCountTitle">
    SELECT COUNT(*) AS COUNT FROM BOARD WHERE DELETE_STATUS='N'AND BOARD_TITLE LIKE ?
    </entry>
    <entry key="listCountContent">
    SELECT COUNT(*) AS COUNT FROM BOARD WHERE DELETE_STATUS='N'AND BOARD_CONTENT LIKE ?
    </entry>
    <entry key="listCountId">
    SELECT COUNT(*) AS COUNT FROM BOARD JOIN MEMBER USING(MEMBER_NO) WHERE DELETE_STATUS='N'AND MEMBER_ID LIKE ?
    </entry>
	<entry key="increaseCount">
    UPDATE BOARD SET COUNT=COUNT+1 WHERE BOARD_NO=? AND DELETE_STATUS='N'
    </entry>
	<entry key="selectBoard">
	SELECT BOARD_NO, BOARD_TITLE , BOARD_CONTENT , TO_CHAR(BOARD_DATE, 'YYYY/MM/DD HH24:MI:SS') "BOARD_DATE", MEMBER_ID ,ATTACHMENT_NAME, ATTACHMENT_PATH, COUNT, (SELECT COUNT(*) FROM COMMENTS WHERE BOARD.BOARD_NO=COMMENTS.BOARD_NO AND STATUS='N') "REPLY_COUNT"
FROM BOARD
JOIN MEMBER USING(MEMBER_NO)
WHERE DELETE_STATUS='N' AND WITHDRAW_STATUS ='N' AND BOARD_NO=?
	</entry>
	<entry key="insertBoard">
	INSERT INTO BOARD (BOARD_NO,BOARD_TITLE,BOARD_CONTENT,ATTACHMENT_PATH,ATTACHMENT_NAME,MEMBER_NO)
VALUES (SEQ_BNO.NEXTVAL, ?, ?, ?, ?, ?)
	</entry>
	<entry key="insertReply">
    INSERT INTO COMMENTS(COMMENT_NO, COMMENT_CONTENT,BOARD_NO, MEMBER_NO) VALUES (SEQ_RNO.NEXTVAL, ?, ?, ?)
    </entry>
    <entry key="selectReplyList">
    SELECT COMMENT_NO, COMMENT_CONTENT, MEMBER_ID, TO_CHAR(COMMENT_DATE, 'YYYY/MM/DD HH24:MI:SS') "COMMENT_DATE"
FROM COMMENTS
JOIN MEMBER USING (MEMBER_NO)
WHERE BOARD_NO=? AND STATUS='N' 
ORDER BY COMMENT_DATE DESC
    </entry>
    <entry key="deleteBoard">
    UPDATE BOARD SET DELETE_STATUS ='Y' WHERE BOARD_NO =?
    </entry>
    <entry key="updateBoard">
    UPDATE BOARD SET BOARD_TITLE=?, BOARD_CONTENT=?, ATTACHMENT_PATH=?, ATTACHMENT_NAME=?, BOARD_DATE=SYSDATE 
WHERE BOARD_NO=?
    </entry>

    <entry key="selectBoardList">
    SELECT *
FROM
(SELECT ROW_NUMBER() OVER(ORDER BY BOARD_NO) RNUM, A.*
FROM
(SELECT BOARD_NO, BOARD_TITLE , CASE 
        WHEN TO_CHAR(BOARD_DATE, 'YYYYMMDD')=TO_CHAR(SYSDATE, 'YYYYMMDD') THEN TO_CHAR(BOARD_DATE, 'HH24:MI:SS')
        ELSE TO_CHAR(BOARD_DATE, 'YYYY-MM-DD')
    END AS "BOARD_DATE", MEMBER_ID, COUNT, (SELECT COUNT(*) FROM COMMENTS WHERE BOARD.BOARD_NO=COMMENTS.BOARD_NO AND STATUS='N') "REPLY_COUNT", BOARD_CONTENT
FROM BOARD
JOIN MEMBER USING (MEMBER_NO)
WHERE DELETE_STATUS='N') A)
ORDER BY RNUM DESC
    WHERE RNUM BETWEEN ? AND ?
    </entry>
    <entry key="selectBoardListCount">
    SELECT *
FROM
(SELECT ROW_NUMBER() OVER(ORDER BY COUNT DESC) RNUM, A.*
FROM
(SELECT BOARD_NO, BOARD_TITLE , CASE 
        WHEN TO_CHAR(BOARD_DATE, 'YYYYMMDD')=TO_CHAR(SYSDATE, 'YYYYMMDD') THEN TO_CHAR(BOARD_DATE, 'HH24:MI:SS')
        ELSE TO_CHAR(BOARD_DATE, 'YYYY-MM-DD')
    END AS "BOARD_DATE", MEMBER_ID, COUNT, (SELECT COUNT(*) FROM COMMENTS WHERE BOARD.BOARD_NO=COMMENTS.BOARD_NO AND STATUS='N') "REPLY_COUNT", BOARD_CONTENT
FROM BOARD
JOIN MEMBER USING (MEMBER_NO)
WHERE DELETE_STATUS='N') A)
    WHERE RNUM BETWEEN ? AND ?
    </entry>
    
    <entry key="boardSearchAllNew">
    SELECT *
FROM
(SELECT ROW_NUMBER() OVER(ORDER BY BOARD_NO DESC) RNUM, B.*
FROM
(SELECT A.*
FROM
(SELECT BOARD_NO, BOARD_TITLE , CASE 
        WHEN TO_CHAR(BOARD_DATE, 'YYYYMMDD')=TO_CHAR(SYSDATE, 'YYYYMMDD') THEN TO_CHAR(BOARD_DATE, 'HH24:MI:SS')
        ELSE TO_CHAR(BOARD_DATE, 'YYYY-MM-DD')
    END AS "BOARD_DATE", MEMBER_ID, COUNT, (SELECT COUNT(*) FROM COMMENTS WHERE BOARD.BOARD_NO=COMMENTS.BOARD_NO AND STATUS='N') "REPLY_COUNT", BOARD_CONTENT
FROM BOARD
JOIN MEMBER USING (MEMBER_NO)
WHERE DELETE_STATUS='N'AND (BOARD_TITLE || BOARD_CONTENT LIKE ?)) A)
B)
WHERE RNUM BETWEEN ? AND ?
    </entry>
    <entry key="boardSearchTitleNew">
    SELECT *
FROM
(SELECT ROW_NUMBER() OVER(ORDER BY BOARD_NO DESC) RNUM, B.*
FROM
(SELECT A.*
FROM
(SELECT BOARD_NO, BOARD_TITLE , CASE 
        WHEN TO_CHAR(BOARD_DATE, 'YYYYMMDD')=TO_CHAR(SYSDATE, 'YYYYMMDD') THEN TO_CHAR(BOARD_DATE, 'HH24:MI:SS')
        ELSE TO_CHAR(BOARD_DATE, 'YYYY-MM-DD')
    END AS "BOARD_DATE", MEMBER_ID, COUNT, (SELECT COUNT(*) FROM COMMENTS WHERE BOARD.BOARD_NO=COMMENTS.BOARD_NO AND STATUS='N') "REPLY_COUNT", BOARD_CONTENT
FROM BOARD
JOIN MEMBER USING (MEMBER_NO)
WHERE DELETE_STATUS='N'AND BOARD_TITLE LIKE ?) A)
B)
WHERE RNUM BETWEEN ? AND ?
    </entry>
    <entry key="boardSearchContentNew">
SELECT *
FROM
(SELECT ROW_NUMBER() OVER(ORDER BY BOARD_NO DESC) RNUM, B.*
FROM
(SELECT A.*
FROM
(SELECT BOARD_NO, BOARD_TITLE , CASE 
        WHEN TO_CHAR(BOARD_DATE, 'YYYYMMDD')=TO_CHAR(SYSDATE, 'YYYYMMDD') THEN TO_CHAR(BOARD_DATE, 'HH24:MI:SS')
        ELSE TO_CHAR(BOARD_DATE, 'YYYY-MM-DD')
    END AS "BOARD_DATE", MEMBER_ID, COUNT, (SELECT COUNT(*) FROM COMMENTS WHERE BOARD.BOARD_NO=COMMENTS.BOARD_NO AND STATUS='N') "REPLY_COUNT", BOARD_CONTENT
FROM BOARD
JOIN MEMBER USING (MEMBER_NO)
WHERE DELETE_STATUS='N'AND BOARD_CONTENT LIKE ?) A)
B)
WHERE RNUM BETWEEN ? AND ?
    </entry>
    <entry key="boardSearchIdNew">
SELECT *
FROM
(SELECT ROW_NUMBER() OVER(ORDER BY BOARD_NO DESC) RNUM, B.*
FROM
(SELECT A.*
FROM
(SELECT BOARD_NO, BOARD_TITLE , CASE 
        WHEN TO_CHAR(BOARD_DATE, 'YYYYMMDD')=TO_CHAR(SYSDATE, 'YYYYMMDD') THEN TO_CHAR(BOARD_DATE, 'HH24:MI:SS')
        ELSE TO_CHAR(BOARD_DATE, 'YYYY-MM-DD')
    END AS "BOARD_DATE", MEMBER_ID, COUNT, (SELECT COUNT(*) FROM COMMENTS WHERE BOARD.BOARD_NO=COMMENTS.BOARD_NO AND STATUS='N') "REPLY_COUNT", BOARD_CONTENT
FROM BOARD
JOIN MEMBER USING (MEMBER_NO)
WHERE DELETE_STATUS='N'AND MEMBER_ID LIKE ?) A)
B)
WHERE RNUM BETWEEN ? AND ?
    </entry>

    <entry key="boardSearchAllOld">
    SELECT *
FROM
(SELECT ROW_NUMBER() OVER(ORDER BY COUNT DESC) RNUM, B.*
FROM
(SELECT A.*
FROM
(SELECT BOARD_NO, BOARD_TITLE , CASE 
        WHEN TO_CHAR(BOARD_DATE, 'YYYYMMDD')=TO_CHAR(SYSDATE, 'YYYYMMDD') THEN TO_CHAR(BOARD_DATE, 'HH24:MI:SS')
        ELSE TO_CHAR(BOARD_DATE, 'YYYY-MM-DD')
    END AS "BOARD_DATE", MEMBER_ID, COUNT, (SELECT COUNT(*) FROM COMMENTS WHERE BOARD.BOARD_NO=COMMENTS.BOARD_NO AND STATUS='N') "REPLY_COUNT", BOARD_CONTENT
FROM BOARD
JOIN MEMBER USING (MEMBER_NO)
WHERE DELETE_STATUS='N'AND (BOARD_TITLE || BOARD_CONTENT LIKE ?)) A)
B)
WHERE RNUM BETWEEN ? AND ?
    </entry>
    <entry key="boardSearchTitleOld">
    SELECT *
FROM
(SELECT ROW_NUMBER() OVER(ORDER BY COUNT DESC) RNUM, B.*
FROM
(SELECT A.*
FROM
(SELECT BOARD_NO, BOARD_TITLE , CASE 
        WHEN TO_CHAR(BOARD_DATE, 'YYYYMMDD')=TO_CHAR(SYSDATE, 'YYYYMMDD') THEN TO_CHAR(BOARD_DATE, 'HH24:MI:SS')
        ELSE TO_CHAR(BOARD_DATE, 'YYYY-MM-DD')
    END AS "BOARD_DATE", MEMBER_ID, COUNT, (SELECT COUNT(*) FROM COMMENTS WHERE BOARD.BOARD_NO=COMMENTS.BOARD_NO AND STATUS='N') "REPLY_COUNT", BOARD_CONTENT
FROM BOARD
JOIN MEMBER USING (MEMBER_NO)
WHERE DELETE_STATUS='N'AND BOARD_TITLE LIKE ?) A)
B)
WHERE RNUM BETWEEN ? AND ?
    </entry>
    <entry key="boardSearchContentOld">
    SELECT *
FROM
(SELECT ROW_NUMBER() OVER(ORDER BY COUNT DESC) RNUM, B.*
FROM
(SELECT A.*
FROM
(SELECT BOARD_NO, BOARD_TITLE , CASE 
        WHEN TO_CHAR(BOARD_DATE, 'YYYYMMDD')=TO_CHAR(SYSDATE, 'YYYYMMDD') THEN TO_CHAR(BOARD_DATE, 'HH24:MI:SS')
        ELSE TO_CHAR(BOARD_DATE, 'YYYY-MM-DD')
    END AS "BOARD_DATE", MEMBER_ID, COUNT, (SELECT COUNT(*) FROM COMMENTS WHERE BOARD.BOARD_NO=COMMENTS.BOARD_NO AND STATUS='N') "REPLY_COUNT", BOARD_CONTENT
FROM BOARD
JOIN MEMBER USING (MEMBER_NO)
WHERE DELETE_STATUS='N'AND BOARD_CONTENT LIKE ?) A)
B)
WHERE RNUM BETWEEN ? AND ?
    </entry>
    <entry key="boardSearchIdOld">
    SELECT *
FROM
(SELECT ROW_NUMBER() OVER(ORDER BY COUNT DESC) RNUM, B.*
FROM
(SELECT A.*
FROM
(SELECT BOARD_NO, BOARD_TITLE , CASE 
        WHEN TO_CHAR(BOARD_DATE, 'YYYYMMDD')=TO_CHAR(SYSDATE, 'YYYYMMDD') THEN TO_CHAR(BOARD_DATE, 'HH24:MI:SS')
        ELSE TO_CHAR(BOARD_DATE, 'YYYY-MM-DD')
    END AS "BOARD_DATE", MEMBER_ID, COUNT, (SELECT COUNT(*) FROM COMMENTS WHERE BOARD.BOARD_NO=COMMENTS.BOARD_NO AND STATUS='N') "REPLY_COUNT", BOARD_CONTENT
FROM BOARD
JOIN MEMBER USING (MEMBER_NO)
WHERE DELETE_STATUS='N'AND MEMBER_ID LIKE ?) A)
B)
WHERE RNUM BETWEEN ? AND ?
    </entry>

    <entry key="deleteReply">
    UPDATE COMMENTS SET STATUS='Y' 
WHERE COMMENT_NO=? AND BOARD_NO=?
    </entry>
    <entry key="updateReply">
    UPDATE COMMENTS SET COMMENT_CONTENT=?
WHERE COMMENT_NO=? AND BOARD_NO=?
    </entry>
    <!--이전글-->
    <entry key="boardPrev">
    SELECT BOARD_NO ,PREV, NEXT
FROM (SELECT BOARD_NO ,LAG(BOARD_NO) OVER (ORDER BY BOARD_NO) PREV , LEAD(BOARD_NO) OVER (ORDER BY BOARD_NO) NEXT FROM BOARD WHERE DELETE_STATUS ='N')
WHERE BOARD_NO =?
    </entry>
    <entry key="boardNext">
    SELECT BOARD_NO ,PREV, NEXT
FROM (SELECT BOARD_NO ,LAG(BOARD_NO) OVER (ORDER BY BOARD_NO) PREV , LEAD(BOARD_NO) OVER (ORDER BY BOARD_NO) NEXT FROM BOARD WHERE DELETE_STATUS ='N')
WHERE BOARD_NO =?
    </entry>
</properties>
